$def with (author, name)

$add_stylesheet("/static/css/freebase-controls.css")
$add_javascript("/static/js/jquery/freebase.suggest.js")

<input id="key_$name" type="hidden" name="$name" value="$author.key"
<input id="name_$name" type="text" name="_name_$name" value="$author.name" style="width: 100%"/>

<div id="msg">

</div>

<script type="text/javascript">
		jQuery(function(\$) {
			\$(document.getElementById("name_$name"))
				.freebaseSuggest({soft:false, suggest_new:"Create New Book", service_url: "http://" + window.location.host, ac_path: '/suggest/search', blurb_path: '/suggest/blurb' })

				.bind("fb-select", function(e, data) {
					\$(document.getElementById("key_$name")).attr("value", data.id);
                         })
		});
		
		function mylog() {
			var msg = "";
			\$.each(arguments, function(i,n) {
				msg += n;
			});
			if (msg) {
				\$("#msg").append("<li>" + msg + "</li>");
			}
		};

</script>