{'type': {'name': 'type/template'}, 'name': 'templates/sitepreferences.tmpl', 'd': {'body': '$def with (permissions)\r\n\r\n$var title: Site Preferences\r\n\r\n$:macros.databar()\r\n$:macros.AlertChanges()\r\n\r\n<script src="/static/js/repetition/repetition-model.js"></script>\r\n\r\n<div id="header">\r\n<div style="float:left;padding-right:15px;"></div>\r\n        <div id="title"> Site Preferences</div>\r\n</div>\r\n\r\n<div id="form-border">\r\n<div id="metadata-body">\r\n\r\n<form method="POST">\r\n\r\n<table>\r\n<tbody>    \r\n<tr id="paths" repeat="template">\r\n    <td>\r\n        <table>\r\n            <tbody>\r\n            <tr>\r\n                <td class="preferenceheader"><img src="/static/images/path.png" alt="Path" border="0" /></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="3">\r\n                    <input id="path[paths]_text"type="text" name="path[paths]" style="width: 100%" />\r\n                    <input type="hidden" name="order" value="[paths]"/>\r\n                </td>\r\n                <td>\r\n                    <button type="remove" class="button"><img src="/static/images/delete_path.png" alt="Delete Path" border="0" /></button>\r\n                    <button type="move-up" class="button"><img src="/static/images/move_up.png" alt="Move Up" border="0" /></button>\r\n                    <button type="move-down" class="button"><img src="/static/images/move_down.png" alt="Move Down" border="0" /></button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td></td>\r\n                <td class="preferenceheader"><img src="/static/images/who.png" alt="Who" border="0" /></td>\r\n                <td class="preferenceheader"><img src="/static/images/what.png" alt="What" border="0" /></td>\r\n                <td></td>\r\n            </tr>\r\n            </tbody>\r\n            <tbody>\r\n                <tr id="path[paths]" repeat="template">\r\n                    <td></td>\r\n                    <td><input id="who[path[paths]]_[paths]" name="who[path[paths]]_path[paths]" style="width: 150px" /></td>\r\n                    <td><input id="what[path[paths]]_[paths]" name="what[path[paths]]_path[paths]" style="width: 150px" /></td>\r\n                    <td><button type="remove" style="border=0; background-color: transparent; padding: 0;"><img src="/static/images/minus.png" border="0" /></button></td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td><button id="newperm_[paths]" type="add" template="path[paths]" class="button"><img src="/static/images/new_permission.png" alt="New Permission" border="0" /></button></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                </tr>\r\n            </tbody>            \r\n        </table>\r\n    </td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n\r\n<script>\r\nfunction click_add_button(id) {\r\n    var button = document.getElementById(id);\r\n    //@@ Hack to click add button programatically\r\n    RepetitionElement._addButton_click.apply(button);    \r\n}\r\nfunction add_newpath(i, path) {\r\n    click_add_button(\'newpath\')\r\n    document.getElementById(\'path\' + i + \'_text\').value = path;    \r\n}\r\nfunction add_newperm(i, j, who, what) {\r\n    click_add_button(\'newperm_\' + i)\r\n    document.getElementById(\'who\' + j + \'_\' + i).value =  who;    \r\n    document.getElementById(\'what\' + j + \'_\' + i).value =  what;    \r\n}\r\n\r\nfunction setup() {\r\n    $ i = 0\r\n    $for item in permissions:\r\n        $ path = item[0]\r\n        $ perms = item[1]\r\n        add_newpath($i, "$path");\r\n        $ j = 0\r\n        $for perm in perms:\r\n            $ who = perm[0]\r\n            $ what = perm[1]\r\n            add_newperm($i, $j, "$who", "$what")\r\n            $ j = j + 1\r\n        $ i = i + 1\r\n}\r\nwindow.onload = setup;\r\n</script>\r\n\r\n<br /><br />\r\n<button id="newpath" type="add" template="paths" class="button"><img src="/static/images/new_path.png" alt="New Path" border="0" /></button>\r\n<button type="submit" value="$_.SAVE" alt="Save" name="_save" title="Save" class="button"><img src="/static/images/save.png" alt="Save" border="0" /></button>\r\n\r\n</div>\r\n</div>\r\n\r\n</form>\r\n', 'title': 'Site Preferences Template'}}