{'type': {'name': 'type/template'}, 'name': 'templates/default_edit.tmpl', 'd': {'body': '$def with (page)\r\n\r\n$var title: Edit $page.name\r\n\r\n<div id="header">  \t \t\r\n    <div style="float:left;padding-left:10px;padding-right:15px;"></div> \t\t\r\n    <span class="pretitle">Currently editing the page:<br /></span> \t\t\r\n    <div id="title">$page.name</div> \t\t\r\n</div>\r\n\r\n$add_javascript("/static/js/repetition/repetition-model.js")\r\n$add_javascript("/static/js/jquery/jquery.js")\r\n\r\n<script>\r\nfunction changeTemplate() {\r\n    var t = document.edit._type.value;\r\n    document.location.href += \'&t=\' + t;\r\n}\r\n\r\nfunction moveup(e) {\r\n    if (!e) e = window.event;\r\n    if (e.preventDefault)\r\n        e.preventDefault();\r\n    \r\n    var parents = $ (this).parents().filter("tr[@repeat]");\r\n    var a = parents[0];\r\n    var b = parents.prev()[0]\r\n    swapvalues(a, b);\r\n    return this.returnValue = false;\r\n}\r\n\r\nfunction movedown(e) {\r\n    if (!e) e = window.event;\r\n    if (e.preventDefault)\r\n        e.preventDefault();\r\n    \r\n    var parents = $ (this).parents().filter("tr[@repeat]");\r\n    var a = parents[0];\r\n    var b = parents.next()[0]\r\n    swapvalues(a, b);\r\n    return this.returnValue = false;\r\n}\r\n\r\nfunction swapvalues(a, b) {\r\n    var ia = $ (\':input\', a);\r\n    var ib = $ (\':input\', b);\r\n    \r\n    for (var i=0; i<ia.length; i++)\r\n        swap(ia[i], ib[i]);\r\n}\r\n\r\nfunction swap(a, b) {\r\n    // probably this check must also be there for type radio\r\n    if (a.nodeName.toLowerCase() == \'input\' && a.type.toLowerCase() == \'checkbox\') {\r\n        var t = a.checked; \r\n        a.checked = b.checked; \r\n        b.checked = t; \r\n    }\r\n    else {\r\n        var t = a.value; \r\n        a.value = b.value; \r\n        b.value = t;         \r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<div id="form-border">\r\n<div id="metadata-body">\r\n\r\n<form name="edit" method="POST">\r\n\r\n<table border="0" cellpadding="0" cellspacing="0">\r\n<tbody>\r\n    <tr>\r\n        <td colspan="3">$_.PAGETYPE $:macros.ThingReference("type/type", "_type", page.type.name) <input type="button" onclick="changeTemplate()" value="$_.CHANGE"/></td>\r\n    </tr>\r\n    <tr>\r\n        <td>&nbsp;</td>\r\n        <td>&nbsp;</td>\r\n        <td>&nbsp;</td>\r\n    </tr>            \r\n</tbody>\r\n\r\n$for p in page.type.properties:\r\n    $ key = p.name\r\n    <tbody>\r\n    $if not p.get(\'unique\'):\r\n        $ i = 0\r\n        <tr>\r\n            <td><img src="/static/images/${key}.png" alt="${key}" border="0" /></td>\r\n            <td></td>\r\n            <td></td>\r\n        </tr>\r\n        $for x in page.d[key]:\r\n            <tr repeat="$i">\r\n                <td colspan="2" style="padding-left:1.0em"> $:thinginput(p.d.type, key + "#" + str(i), value=x)</td>\r\n                <td style="white-space: nowrap" valign="top">\r\n                    <button type="remove" template="row_$key"><img src="/static/images/delete.png" alt="Delete" border="0" /></button>\r\n                    <button type="move-up" template="row_$key" onclick="return moveup.apply(this, [event]);"><img src="/static/images/move_up.png" alt="Move Up" border="0" /></button>\r\n                    <button type="move-down" template="row_$key" onclick="return movedown.apply(this, [event]);"><img src="/static/images/move_down.png" alt="Move Down" border="0" /></button>\r\n                </td>\r\n            </tr>\r\n            $ i = i + 1\r\n        <tr id="row_$key" repeat="template">\r\n            <td colspan="2" style="padding-left:1.0em">\r\n                $:thinginput(p.d.type, key + \'#[row_\' + key + \']\', value="")\r\n            </td>\r\n            <td style="white-space: nowrap;" valign="top">\r\n                <button type="remove" template="row_$key"><img src="/static/images/delete.png" alt="Delete" border="0" /></button>\r\n            \t<button type="move-up" template="row_$key" onclick="return moveup.apply(this, [event]);"><img src="/static/images/move_up.png" alt="Move Up" border="0" /></button>\r\n            \t<button type="move-down" template="row_$key" onclick="return movedown.apply(this, [event]);"><img src="/static/images/move_down.png" alt="Move Down" border="0" /></button>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td><button type="add" template="row_$key">Add $key</button></td>\r\n        </tr>\r\n    $else:\r\n        <tr>\r\n            <td><img src="/static/images/${key}.png" alt="${key}" border="0" /></td>\r\n            <td width="100%">$:thinginput(p.d.type, key, value=page.d[key])</td>\r\n            <td></td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n\r\n$:macros.EditButtons()\r\n\r\n</div>\r\n</div>\r\n\r\n</form>\r\n', 'title': 'default_edit template'}}