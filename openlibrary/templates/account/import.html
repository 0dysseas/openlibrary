$def with (books=None, books_wo_isbns=None)

$ title = "Import and Export Options"
$var title: $_(title)

<div id="contentHead">
    <div class="small sansserif grey account-settings-menu">
      <a href="$ctx.user.key">$ctx.user.displayname</a>
      &raquo;
      <a href="$homepath()/account">$_("Settings")</a>
      &raquo; $title
    </div>
    <h1>$title</h1>
</div>

<div id="contentBody">
  <h3>$_("Import from Goodreads")</h3>
  $if not books:
    <form method="POST" action="/account/import/goodreads"
          enctype="multipart/form-data" class="olform olform--decoration">
      <div>
        <input type="file" name="csv" />
        <br>File size limit 10MB and .csv file type only
      </div>
      <div>
        <input class="cta-btn cta-btn--available cta-btn--small"
             type="submit" value="Load Books">
      </div>
    </form>

  $else:  
    <div id="myProgress" class="hidden">
      <div id="myBar">Importing...</div>
    </div>
    <div>
      <button class="cancel-button hidden cta-btn cta-btn--available cta-btn--small"
        onclick="window.location.reload();" >Cancel</button>
    </div>

    
      <input type="submit" class="import-submit cta-btn cta-btn--unavailable" value="Import $len(books) Books">
      $ keys = ['ISBN', 'Title', 'My Rating', 'Exclusive Shelf']
      <table class="import-table table-fixed" style="max-height: 360px;">
        <thead>
          <tr>
            <th class="toggle-all">
              <input type="checkbox" checked="checked">
            </th>
            $for key in keys:
              <th>$key</th>
            <th class="import-status hidden">
              Status
            </th>
            <th class="status-reason hidden">
              Reason
            </th>
        </thead>
        <tbody>
          $for isbn in books:
            <tr class="table-row $isbn">
              <td>
              $ dict = {'ISBN':'', 'Title':'', 'My Rating':'', 'Exclusive Shelf':''}
              $ k = ['ISBN', 'My Rating', 'Exclusive Shelf']
              $for key in k:
                  $ dict[key] = books[isbn].get(key)
              <input class="add-book" value="$(dict)" type="checkbox" checked="checked">
              </td>
              $for key in keys:
                <td>$books[isbn].get(key)</td>
            </tr>
          $for id in books_wo_isbns:
            <tr>
              <td>
              </td>
              $for key in keys:
                <td>
                  $if books_wo_isbns[id].get(key) != '=""':
                    $books_wo_isbns[id].get(key)
                </td>
              <td class="books-wo-isbn hidden error-imported">Error</td>
              <td class="books-wo-isbn hidden error-imported">No ISBN</td>
            </tr>
        </tbody>
      </table>
</div>
