$def with (page)

$ _t = _.get_namespace('/type/edition')
$ _ = _.get_namespace('/mode/view')

$var title: $page.title

$add_stylesheet('/static/css/results.css')
$add_stylesheet('/static/css/doc-styles.css')

<script>
function gbs_process(d) {
  if (d) {
    document.getElementById('gbs_placeholder').innerHTML = '<a href="' + d['info_url'] + '" class="datalink">Google Book Search</a> (' + d['preview']+')';
  }
}
function gbs_callback(d) {
$if page.get('isbn_10'): gbs_process(d['ISBN:$page.isbn_10'])
$if page.get('lccn'): gbs_process(d['LCCN:$page.lccn'])
}
</script>

$ lccn = "http://lccn.loc.gov/XXX"


<blockquote class="text">

    <div id="header">               
        <div id="title" class="title-pad">$page.title</div>
        <div id="statement">
            by <a href="" class="datalink">$:thingrepr(page.authors)</a><br />		
            <span class="book-details-italic"><br /></span> 
        </div>

        <div id="book-art" class="datalink">

            <img src="$page.coverimage" width="180" alt="Cover Image" />
            <div id="book"></div>
            <br clear="all" />
            <!-- 
            <div id="viewthisbook-oln" style="margin-top: -50px; padding-left: 20px;">
                <a href="http://demo.openlibrary.org:8080/search?q=socialism" class="brown" style="text-decoration:none"><button type="submit" name="submit" value="Change Cover" class="action" style="background-color: #C9D389; color: #6A2E00; width: 176px;">View All Editions (265)</button></a>
                <div style="margin-top: 4px;">
                    <a href="http://www.openlibrary.org/details/soulofmanunderso00wilduoft" class="white" style="text-decoration:none"><button type="submit" name="submit" value="Change Cover" class="action" style="width: 176px;">Scan This Book</button></a>
                </div>
            </div>
            -->
        </div>
    </div>

    <div id="content-right">$:macros.OptionsEdition(page)
    </div>

    <div>


            <table border="0" cellpadding="0" cellspacing="0">

                $ s0 = ["publish_date", "publishers", "publish_places"]
                $ s1 = ["work_titles", "by_statements", "series", "languages", "edition_name", "physical_format", "physical_dimensions"]
                $ s2 = ["isbn_10", "isbn_13", "lccn", "dewry_decimal_class", "lc_classifications"]
                $ s3 = ["genres", "subjects"]
                $ sections = [s0, s1, s2, s3]

                $ rule = "-top"

                $for s in sections:
                    $for name in s:
                        <tr>
                            <td class="formheader$rule">$_t[name]:</td>
                            <td class="formfield$rule">$:thingrepr(page[name])</td>
                        </tr>

                       $ rule = ""
                     $ rule = "-rule"

            </table>
            <br clear="all" />


            <div class="toc-header" style="border-bottom: 1px solid #ccc">
                <b>Description</b>
                <div style="padding-top: 0px; margin-top: -35px; float: right;">
                    <img src="/static/images/flourish.left.gif"  alt="[" />
                    <button type="submit" name="submit" value="Submit A Review" class="edition">Edit</button>
                    <img src="/static/images/flourish.gif"  alt="]" />
                </div>
            </div>
            <br />
            
            $page.description
            <br /><br />
            <b>Notes:</b> $page.notes

            <div class="toc-header" style="padding-top: 35px;">
                <b>Table of Contents</b>
                <div style="padding-top: 0px; float:right; margin-top: -25px;">
                    <img src="/static/images/flourish.left.gif"  alt="[" /><button type="submit" name="submit" value="Submit A Review" class="edition">Edit</button><img src="/static/images/flourish.gif"  alt="]" />
                </div>
            </div>


            <div style="padding-top: 10px;">
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    $ first = "first"
                    $for i, toc in enumerate(page.toc):
                        <tr>
                            <td class="toc-number rule $first"><a href="#anchor1">$(i + 1)</a>&nbsp;&nbsp;</td>
                            <td class="toc rule $first" width="100%">$toc</td>
                            <td class="toc-link-end rule $first" align="center">&nbsp;&nbsp;</td>
                        </tr>
                        $ first = ""
                </table>
            </div>


    </div>
</div>

$if page.get('isbn_10'): <script src="http://books.google.com/books?bibkeys=ISBN:${page.isbn_10}&amp;jscmd=viewapi&amp;callback=gbs_callback"></script>
$if page.get('lccn'): <script src="http://books.google.com/books?bibkeys=LCCN:${page.lccn}&amp;jscmd=viewapi&amp;callback=gbs_callback"></script>