$ languages = _.get_languages()

$ locale = _.get_locale()
$ _ = _.get_namespace('/macros/ChangeLanguage')

<br clear="all" />
<span class="green">
<b>$_.change_language:</b>
$:Dropdown('lang', languages, onchange="changelang();", id="lang_dropdown", value=locale).render()
</span>


<script>
       function changelang() {
           setlang(document.getElementById("lang_dropdown").value);
       }

       function setlang(lang) {
           document.cookie = "HTTP_LANG=" + lang + "; path=/;";
           window.location.reload()
       }
</script>